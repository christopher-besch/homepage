{"componentChunkName":"component---src-templates-article-tsx-content-file-path-src-articles-09-svg-fonts-with-sed-svg-fonts-with-sed-md","path":"/articles/svg_fonts_with_sed/","result":{"data":{"mdx":{"body":"\nSo you want to embed an SVG on your website and add this to your HTML:\n```html\n<object class=\"page\" data=\"input_svg.svg\" type=\"image/svg+xml\"></object>\n```\nIn my case this is an Affinity Designer SVG export.\n\nBut now we realize that the fonts don't work.\nThat's because your pretty SVG doesn't tell the browser where to find these fonts.\nUsually you can fix this with CSS like this, making sure you actually host the `.woff` file at the specified location:\n```css\n@font-face {\n    font-family: 'Candara';\n    src: url('/vendor/fonts/Candara-Regular.woff')format('woff');\n    font-weight: normal;\n    font-style: normal;\n}\n```\n\nUnfortunately this CSS can't just be included in your HTML document, it has to be part of the SVG itself.\nThis is how the original SVG looks like:\n```svg\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg [...]>\n    [...]\n</svg>\n```\n\nAfter the injection we need it to look like this:\n```svg\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg [...]>\n    <defs>\n        <style type=\"text/css\"><![CDATA[\n            @font-face {\n                font-family: 'Candara';\n                src: url('/vendor/fonts/Candara-Regular.woff')format('woff');\n                font-weight: normal;\n                font-style: normal;\n            }\n        ]]></style>\n    </defs>\n\n    [...]\n</svg>\n```\n\n# All Hail sed, a **s**tream **ed**itor!\n\nSo, how do we do this?\n\nWe have the font-loading CSS in the file `fonts.css`.\nOur first challenge lies in surrounding this CSS with the required SVG stuff.\n\nLet's do this with sed and start with creating the file `fonts_css_template.txt`:\n```xml\n<defs>\n    <style type=\"text/css\"><![CDATA[\nOHtFGivqhAswi\n    ]]></style>\n</defs>\n```\nAs you can see the (randomly chosen) string `OHtFGivqhAswi` needs to be replaced with the CSS.\n```bash\nsed \"/OHtFGivqhAswi/e cat fonts.css\" fonts_css_template.txt | \\\n    sed 's/OHtFGivqhAswi//' \\\n    > final_text_to_include_in_svg.txt\n```\n1. The first sed command reads `fonts.css` and puts it right before `OHtFGivqhAswi`;\n2. the second deletes `OHtFGivqhAswi`.\n    This only works because `OHtFGivqhAswi` is on its own line.\n3. We pipe the output into `final_text_to_include_in_svg.txt`.\n    This is what needs to be injected into the SVG.\n\n## Commence the Injection\n\n```bash\nsed -E 's/(<svg [^>]+>)/\\1\\ncI0WWZKD2UKEj\\n/' input_svg.svg | \\\n    sed \"/cI0WWZKD2UKEj/e cat final_text_to_include_in_svg.txt\" | \\\n    sed 's/cI0WWZKD2UKEj//' \\\n    > output_svg.svg\n```\n1. Our first command finds the opening `svg` tag and appends the random string `cI0WWZKD2UKEj`, making sure it is on its own line.\n2. This is followed by exactly what we've done before: prepend what needs to be injected,\n3. replace `cI0WWZKD2UKEj` and\n4. pipe the output where it is needed.\n\nYou don't need that ginormous web framework for simple thingsâ€”some CSS and sed does the trick just fine.\nPerhaps, first take a look at what the GNU toolbox offers when solving the next challenge you come across.\n\n## [The Final Script](https://github.com/SelinaStrobel/homepage/blob/main/fonts_loader/load_fonts_in_css.sh)\n```bash\n#!/bin/bash\nset -euo pipefail\nDIR=\"$(cd \"$(dirname \"${BASH_SOURCE[0]}\")\" >/dev/null 2>&1 && pwd)\"\n\nFONTS_CSS_TEMPLATE=\"$DIR/fonts_css_template.txt\"\nFINAL_TEXT_TO_INCLUDE_IN_SVG=\"$DIR/final_text_to_include_in_svg.txt\"\nFONTS_CSS_FILE=\"$DIR/fonts.css\"\n\necho \"converting $1 to $2\"\n\nsed \"/OHtFGivqhAswi/e cat $FONTS_CSS_FILE\" \"$FONTS_CSS_TEMPLATE\" | \\\n    sed 's/OHtFGivqhAswi//' \\\n    > \"$FINAL_TEXT_TO_INCLUDE_IN_SVG\"\n\nsed -E 's/(<svg [^>]+>)/\\1\\ncI0WWZKD2UKEj\\n/' \"$1\" | \\\n    sed \"/cI0WWZKD2UKEj/e cat $FINAL_TEXT_TO_INCLUDE_IN_SVG\" | \\\n    sed 's/cI0WWZKD2UKEj//' \\\n    > \"$2\"\n```\nSave this as `load_fonts_in_css.sh`, run:\n```bash\nchmod +x ./load_fonts_in_css.sh\n./load_fonts_in_css.sh input_svg.svg output_svg.svg\n```\n","frontmatter":{"date":"Monday, 10th February, 2025","title":"Inject Fonts into Web SVGs with sed","description":" Add font-loading CSS to SVGs with a sed script. ","banner":"/social_banner/web_svgs.png","title_banner":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECBAX/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQP/2gAMAwEAAhADEAAAAZMWVzyyH//EABoQAAIDAQEAAAAAAAAAAAAAAAERAAMSAhD/2gAIAQEAAQUCFtqN3ayR4nMz/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8BiP/EABcRAQADAAAAAAAAAAAAAAAAAAABERL/2gAIAQIBAT8B1K3/xAAaEAACAgMAAAAAAAAAAAAAAAAAARAhETEy/9oACAEBAAY/Arwclqds/8QAGRAAAwEBAQAAAAAAAAAAAAAAAAEhEWEQ/9oACAEBAAE/IUpN0h23IN7MH3zEEB//2gAMAwEAAgADAAAAEMjf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxAP/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8QVP/EABsQAQACAwEBAAAAAAAAAAAAAAEAESExQWGB/9oACAEBAAE/EMvG9gPlEtmQo6zHqdybwWjPIgVZ6OYaB/VFn//Z"},"images":{"fallback":{"src":"/static/8a91fa78321acab130bedea9f7bfec75/df184/alpha_romeo.jpg","srcSet":"/static/8a91fa78321acab130bedea9f7bfec75/a57aa/alpha_romeo.jpg 480w,\n/static/8a91fa78321acab130bedea9f7bfec75/313e8/alpha_romeo.jpg 960w,\n/static/8a91fa78321acab130bedea9f7bfec75/df184/alpha_romeo.jpg 1920w","sizes":"(min-width: 1920px) 1920px, 100vw"},"sources":[{"srcSet":"/static/8a91fa78321acab130bedea9f7bfec75/4f890/alpha_romeo.webp 480w,\n/static/8a91fa78321acab130bedea9f7bfec75/2edd7/alpha_romeo.webp 960w,\n/static/8a91fa78321acab130bedea9f7bfec75/564ec/alpha_romeo.webp 1920w","type":"image/webp","sizes":"(min-width: 1920px) 1920px, 100vw"}]},"width":1920,"height":1157}}},"title_banner_horizontal_position":"30%","title_banner_vertical_position":"25%","version":"1.0.0"}}},"pageContext":{"id":"ef9cf254-fafa-5326-9758-f4bb92616356","frontmatter":{"type":"article","title":"Inject Fonts into Web SVGs with sed","description":" Add font-loading CSS to SVGs with a sed script. ","banner":"/social_banner/web_svgs.png","thumb":"../../../static/social_banner/web_svgs.png","title_banner":"../../images/photography/alpha_romeo.jpg","title_banner_horizontal_position":"30%","title_banner_vertical_position":"25%","slug":"svg_fonts_with_sed","date":"2025-02-10T00:00:00.000Z","listed":true,"version":"1.0.0"}}},"staticQueryHashes":["1995789189","2480137602","475732191"],"slicesMap":{}}