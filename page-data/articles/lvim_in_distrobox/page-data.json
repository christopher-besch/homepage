{"componentChunkName":"component---src-templates-article-tsx-content-file-path-src-articles-07-lvim-in-distrobox-lvim-in-distrobox-md","path":"/articles/lvim_in_distrobox/","result":{"data":{"mdx":{"body":"\nYou're missing that one program that isn't available in your Linux distro?\nWith [Distrobox](https://distrobox.privatedns.org), the 'Linux Subsystem for Linux,' you can install it anyways.\nThis article explains how to do that with the example of installing [LunarVim](https://www.lunarvim.org) on Red Hat.\n\nLunarVim's dependencies aren't part of Red Hat's official repositories.\nBut with Docker you can run any program in containers, similar to a virtual machine.\nThese containers can be based on any distribution, regardless of your host's distro.\nSo you can use Docker to create for example an Arch container and install LunarVim in it.\nTo allow LunarVim to access your host's files, you have to mount your host's root directory.\nTo make these mounts, starting the container and launching its programs from your host easier, Distrobox has been created.\n\n### Installing Requirements on Host\nDistrobox requires Docker or Podman (a fork of Docker that runs containers rootlessly).\nBoth Distrobox and Podman are part of [the Extra Packages for Enterprise Linux (EPEL)](https://docs.fedoraproject.org/en-US/epel), an official repository you can add to Red Hat.\nFollow the instructions on the official page linked above to install the repo.\nNow you can install what you need:\n```bash\nyum install podman-docker\nyum install distrobox\n```\n\n### Creating the Container\nFirst you have to create an Arch container using Distrobox.\nBecause LunarVim installs many files in the home directory, you should create such a directory specifically for your Arch container.\nOtherwise your host's home directory would get bloated.\n```bash\nmkdir -p ~/.distrobox/arch`\ndistrobox-create --name arch --image archlinux --home ~/.distrobox/arch\n```\n\nNow you can attach your terminal to the container's stdin and stdout:\n```bash\ndistrobox enter arch\n```\n\n### Inside the Container\nNow you're inside your container's shell.\nIn this article, all commands that start with a `$` are to be run in your container, not your host.\nIf you like, you can install all your dotfiles at this point.\n```bash\n# requires https://gitub.com/christopher-besch/configs in your host's ~/.custom_configs\n$ /home/$(whoami)/.custom_configs/install.sh server && source ~/.bashrc\n```\n\nLet's use `pacman`, the Arch package manager, to install what Red Hat's `yum` can't provide:\n```bash\n# if you're asked what repos to use, the defaults are fine\n$ sudo pacman -S git make python-pip cargo neovim vim xclip\n```\nLunarVim requires `node`;\nthis is best done with `nvm`.\nYou should check the current version of the installation script in [the official nvm install docs](https://github.com/nvm-sh/nvm#install--update-script) and change the `curl` command accordingly:\n```bash\n$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.2/install.sh | bash && source ~/.bashrc\n$ nvm install node\n```\n\nOnce that is done, you can finally install LunarVim.\n```bash\n# answer yes to all questions\n$ bash <(curl -s https://raw.githubusercontent.com/lunarvim/lunarvim/master/utils/installer/install.sh)\n```\n\nNow a little bit of work has to be done on your containers `~/.bashrc` (located at `~/.distrobox/arch/.bashrc` on your host):\n1. Add `export PATH=/home/$(whoami)/.distrobox/arch/.local/bin:$PATH` and\n2. remove the line `[[ $- != *i* ]] && return`.\n   Otherwise `nvm`'s installation paths don't get loaded when starting LunarVim from your host.\n\nIn order for those paths to get loaded, we have to `source` the just edited `~/.bashrc` every time LunarVim starts.\nThis can be done with a little wrapper script you should put into `~/lvim` in your container.\n```bash\n#!/bin/bash\n\nsource ~/.bashrc\nlvim \"$@\"\n```\nMark this file executable\n```bash\n$ chmod +x ~/lvim\n```\nand export it to be usable from your host using Distrobox (still from within your container).\n```bash\n$ distrobox-export --bin \"/home/$(whoami)/.distrobox/arch/lvim\" --export-path \"/home/$(whoami)/.local/bin\"\n```\nThis creates the file `~/.local/bin/lvim` on your host.\nWhen you run it from your host, Distrobox starts the container (if not already done so) and launches LunarVim with the `PATH` variable and all mounts properly configured.\n\n### Finalizing\nYou need to `export PATH=/home/$HOME/.local/bin:$PATH` in your host's `~/.bashrc` but then you can run `lvim` from your host and use LunarVim just as if it were natively installed.\nSince all the language servers used by LunarVim are installed in the container, all programming languages you use need to be installed in both your host and your container.\n\n","frontmatter":{"date":"Tuesday, 25th October, 2022","title":"LunarVim in Distrobox","description":" You're missing that one program that isn't available in your Linux distro? With Distrobox, the 'Linux Subsystem for Linux,' you can install it anyways. This article explains how to do that with the example of installing LunarVim on Red Hat. ","banner":"/social_banner/lvim.png","title_banner":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgT/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAAByPTYkkg//8QAGhAAAgMBAQAAAAAAAAAAAAAAAAIBERIDIf/aAAgBAQABBQKFs6NLIaL81J//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAEAAgMAAAAAAAAAAAAAAAABACERIDH/2gAIAQEABj8CpIC8lmdP/8QAGxAAAwEAAwEAAAAAAAAAAAAAAAERITFBYbH/2gAIAQEAAT8hzPQrrK3fsWcobVLEp0UPQ//aAAwDAQACAAMAAAAQsy//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQMBAT8QjX//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQIBAT8QWwv/xAAcEAEBAQABBQAAAAAAAAAAAAABEQAhMUFRocH/2gAIAQEAAT8QkhACZL29aigU4bV+GBVS9RySQUAmY+fORc//2Q=="},"images":{"fallback":{"src":"/static/23ac7cb046c792e2d5d509d85a371cbf/b1838/alpha_tango.jpg","srcSet":"/static/23ac7cb046c792e2d5d509d85a371cbf/ba6bf/alpha_tango.jpg 480w,\n/static/23ac7cb046c792e2d5d509d85a371cbf/91255/alpha_tango.jpg 960w,\n/static/23ac7cb046c792e2d5d509d85a371cbf/b1838/alpha_tango.jpg 1920w","sizes":"(min-width: 1920px) 1920px, 100vw"},"sources":[{"srcSet":"/static/23ac7cb046c792e2d5d509d85a371cbf/de210/alpha_tango.webp 480w,\n/static/23ac7cb046c792e2d5d509d85a371cbf/0d075/alpha_tango.webp 960w,\n/static/23ac7cb046c792e2d5d509d85a371cbf/24451/alpha_tango.webp 1920w","type":"image/webp","sizes":"(min-width: 1920px) 1920px, 100vw"}]},"width":1920,"height":1114}}},"title_banner_horizontal_position":"60%","title_banner_vertical_position":"70%","version":"1.0.0"}}},"pageContext":{"id":"ef776637-9f6b-55ce-aba6-1a52100f6c8a","frontmatter":{"type":"article","title":"LunarVim in Distrobox","description":" You're missing that one program that isn't available in your Linux distro? With Distrobox, the 'Linux Subsystem for Linux,' you can install it anyways. This article explains how to do that with the example of installing LunarVim on Red Hat. ","banner":"/social_banner/lvim.png","thumb":"../../../static/social_banner/lvim.png","title_banner":"../../images/photography/alpha_tango.jpg","title_banner_horizontal_position":"60%","title_banner_vertical_position":"70%","slug":"lvim_in_distrobox","date":"2022-10-25T00:00:00.000Z","listed":true,"version":"1.0.0"}}},"staticQueryHashes":["1995789189","2480137602","475732191"],"slicesMap":{}}